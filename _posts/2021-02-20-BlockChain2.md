---
layout: post
title: "[BLOCKCHAIN] 해시, 블록체인, 합의 알고리즘"
date: 2021-02-20 00:00:00
categories: [STUDY]
tags: [BLOCKCHAIN]
last_modified_at: 2021-02-23
---

from [https://steemit.com/kr/@yahweh87/1-consensus-problem](https://steemit.com/kr/@yahweh87/1-consensus-problem)
<br>from [https://steemit.com/kr/@yahweh87/2](https://steemit.com/kr/@yahweh87/2)
<br>from [https://www.banksalad.com/contents/%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85%ED%95%98%EB%8A%94-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%EB%A8%B8%ED%81%B4%ED%8A%B8%EB%A6%AC-Merkle-Trees-%EB%9E%80-ilULl](https://www.banksalad.com/contents/%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85%ED%95%98%EB%8A%94-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%EB%A8%B8%ED%81%B4%ED%8A%B8%EB%A6%AC-Merkle-Trees-%EB%9E%80-ilULl)
<br>from [https://academy.binance.com/ko/articles/proof-of-work-explained](https://academy.binance.com/ko/articles/proof-of-work-explained)
<br>from [https://academy.binance.com/ko/articles/proof-of-stake-explained](https://academy.binance.com/ko/articles/proof-of-stake-explained)

---

# 해쉬 Hash

### 해쉬 함수
<p>
: 해쉬 함수는 임의의 입력을 받아 고정된 길이의 랜덤 데이터를 생성.
<br>: 입력의 변화는 출력에 랜덤하게 나타남.
<br>: 일방향 함수라 출력값으로 입력값을 추적할 수 없음.
<br>: 해쉬값이 같으면 같은 객체임을 알 수 있음.
<br>: 즉, 위변조를 확인할 수 있는 무결성을 제공.
</p>

---

# 블록체인 BlockChain

<p>
: 블록과 블록을 체인형태로 연결한 자료구조로 데이터의 추가만 가능.
</p>

### 블록

<p>
: 다수의 거래 정보의 묶음
<br>: 일정 시간마다 생성
<br>: head와 body로 이루어져 있음
</p>

<figure>
   <img src="/Fortune/assets/BlockChain/10.jpg" style="width:50%">
</figure>

<p>
블록의 해시인 TXID(transaction ID)로 블록을 식별
<br>헤더의 모든 정보를 합산하여 SHA256 해시함수로 얻은 결과값
</p>

<p>
Version은 해당 비트 코인 프로그램의 버전 정보
</p>

<p>
Previous Block Hash는 이전 블록의 주소값(이전 블록의 해쉬값)을 가리킴
</p>

<p>
Merkle Root는 body의 트랜잭션들을 정리한 머클 트리(해시 트리)의 루트노드.
<br>리프 노드의 해시값을 합한 정보로 부모 노드의 해시값을 결정.
머클 트리를 통해, 데이터의 간편하고 확실한 인증은 물론 빠르게 검색 가능.
</p>

<p>
단일 블록내에 존재하는 트랜잭션의 무결성과 블록의 해시의 무결성을 증명할 수 있음.
</p>

<p>
Time은 해당 블록의 대략적인 생성 시간을 의미
<br>bits는 난이도 해시 목표값을 의미
<br>Nonce는 블록을 만드는 과정에서 해시값을 구할 때 필요한 값
</p>

### 블록체인 종류

<p>
크게 Public, Private, Consortium으로 구분.
</p>

|---|---|---|---|
||Public|Private|Consortium|
|---|---|---|---|
|허가가 필요한가|o|x|x|
|누가 읽을 수 있는가|누구나|초대된 사용자만|경우에 따라 변경|
|누가 쓸수 있는가|누구나|승인된 참여자만|승인된 참여자만|
|소유자|x|단일 주체|복수 주체|
|참여자를 알 수 있나|x|o|o|
|트랜젝션 스피드|느림|빠름|빠름|

<p>
Public의 경우, 수많은 노드로 탈중앙화에 가까우나 처리량이 떨어지지만 검열 저항이 좋음.
따라서 스마트 콘트랙트와 같이 더 강력한 보안이 필요할 때 사용.
<br>모두가 변경사항에 동의할 수 없으므로 확장성이 떨어지는 문제 발생.
이러한 상황에서는 작업 증명이 효과적임.
</p>

<p>
Private의 경우, 제한과 규칙이 존재하므로 완벽히 탈중화된 시스템이 아님.
처리량과 속도가 우수하며, 정보를 비공개적으로 유지하므로
블록체인의 특징을 활용하려는 기업환경에 적합.
이러한 상황에서 권위 증명같은 지정된 검증자가 있는 알고리즘이 효과적.
</p>

<p>
Consortium의 경우, 프라이빗과 퍼블릭 체인을 결합한 것.
시스템 규칙은 유연하며 소수의 주체가 검증자 역할을 함.
따라서 프라이빗의 중앙 통제를 없애고, 퍼블릭보다 더 적은 노드가 효과적으로 가능.
동일한 산업내에서 운영되는 조직환경과 공통된 거래 및 정보를 필요로하는 곳에서 사용.
인사이트 공유를 통해 조직에 이득이 됨.
</p>

---

# 합의 알고리즘 Consensus Algorithm

<p>합의 알고리즘은 어떠한 방식으로 블록을 생성하고,
어떤 블럭이 진짜인지 판별하기 위한 알고리즘</p>

### 탈중앙화 Application(DApp)

<p>
: 탈중앙화된 P2P 네트워크(분산시스템)에서 동작
<br>: 어떠한 단일 노드도 DApp의 제어권을 가질 수 없음
</p>

### 합의 알고리즘

<p>
: 피어가 발행한 정보(거래)가 올바른지 검증하기 위한 방법
<br>: P2P 네트워크의 신뢰도를 보장하기 위함
<br>: 네트워크에서 하나의 결과에 대한 합의를 얻기 위한 알고리즘
<br>: 무결성을 보장
</p>

### 합의 알고리즘 종류

#### PoW(Power of Work)
<p>
: 작업 증명, 컴퓨터의 연산력에 비례해서 갱신 권한이 많음
<br>: 마이너들은 블록체인에 새로운 블록을 추가하는 일을 맡음.
이를 위해서는 주어진 조건에 맞는 논스를 추측해야함.
논스를 찾으면, 결과의 유효성을 검증하고 보상을 받게 됨.
그리고 결과값은 블록 해시로 저장됨.
<br>: 계산을 위한 많은 시간과 연산 능력을 필요로 하므로,
네트워크를 공격해서 얻을 수 있는 이익보다 발생하는 비용이 커 비효율적.
따라서 네트워크를 수 많은 공격들로부터 보호할 수 있음.
</p>

<p>
가장 일반적인 알고리즘이지만,
상당한 전력을 소모하고 고가의 컴퓨터 하드웨어가 필요로 한다는 점이 단점.
또한 요구하는 노동은 네트워크 보안을 보장하는 것 외에는 활용될 수 없음.
</p>

#### PoS(Power of Stake)
<p>
: 지분 증명, 지분의 양에 비례해서 갱신 권한이 많음
<br>: 일정량의 코인을 지분으로 가지고 있는 노드만이 블록을 형성할 수 있음
<br>: 여러 요소를 기준으로 다음 불록의 검증자(블록 형성자)가 될 노드를 선정함.
<br>: 지분이 많을 수록 다음 형성자가 될 확률이 높아,
이를 막기 위해 보편적으로 '무작위 블록 선택'과 '코인 나이에 따른 선택'을 통해 다음 형성자를 선택.
</p>

<p>: 형성자는 블록안의 트랜잭션의 유효성을 확인하고, 서명 후 블록체인에 추가함.
그리고 트랜잭션 수수료를 보상으로 받음.
보상은 특정기간 이후에 사용이 가능해, 블록의 유효성을 검증할 수 있는 시간을 벌수 있음.
만약 네트워크가 잘못된 트랜젝션을 발견하면, 형성자는 지분의 일부를 잃어버리고,
이후 형성자로 참여할 수 없게 됨. 지분이 매우 중요하기에 이는 치명적임.
</p>

<p>
장점은 에너지 효율과 보안.
저렴하기에 많은 유저들이 노드를 운영하고, 탈중앙화에 가까운 네트워크를 구현할 수 있음.
</p>

#### POA(Power of Authority)
<p>
: 권위 증명, 평판을 기반으로 갱신 권한을 가짐
<br>: 한정된 신뢰할 수 있는 주체를 블록 검증자로 설정
</p>

<p>
높은 처리량과 확장성을 위해 탈중앙성을 포기.
따라서 암호화폐 영역 보다는, 사설 블록체인 어플리케이션과 가까움.
검열이나 블랙리스팅이 쉽게 이루어질 수 있어 불변성 측면의 문제가 있음.
그리고 검증자는 신원이 개방되어 있어 이에따른 문제점도 존재.
</p>

<p>
그외에도 DPos, DPow, PoB 등 다양한 알고리즘이 존재.
</p>


<br>
<br>
